<?xml version="1.0" encoding="UTF-8"?>
<!--
  CHARACTER PROFILE - DETAIL VIEW
  –≠–∫—Ä–∞–Ω/–º–æ–¥–∞–ª–∫–∞ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:
  –ø–æ—Ä—Ç—Ä–µ—Ç, –∫—Ä–∞—Ç–∫–∞—è –±–∏–æ–≥—Ä–∞—Ñ–∏—è, —Å—Ç–∞—Ç—ã –æ—Ç–Ω–æ—à–µ–Ω–∏–π, –≤–∞–∂–Ω—ã–µ —Ñ–∞–∫—Ç—ã.

  –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ —Ñ–∞–π–ª—ã:
    - ../SCREENS_SPECIFICATION.xml
    - ./RelationshipsPage.xml
    - ../../characters/*/visual-specs.xml
    - ../../design/DESIGN_SYSTEM.xml

  –ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: docs/prompts/screens/shared/CharacterProfile.xml
  –í–µ—Ä—Å–∏—è: 1.0
  –î–∞—Ç–∞: 2026-03-01
-->

<character-profile-specification name="CharacterProfile" version="1.0">

  <meta>
    <description>
      –ü—Ä–æ—Ñ–∏–ª—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–∑ —ç–∫—Ä–∞–Ω–∞ "–û—Ç–Ω–æ—à–µ–Ω–∏—è" –ø–æ —Ç–∞–ø—É –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É.
      –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ä—É–ø–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç, –±–∞–∑–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∏—Å—Ç–æ—Ä–∏—é –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏
      –ø–æ–¥—Å–∫–∞–∑–∫–∏, –∫–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–º–æ–≥–∞—é—Ç —É–ª—É—á—à–∏—Ç—å —Å–≤—è–∑—å.
    </description>
    <invocation>
      <from>RelationshipsPage.card.tap</from>
      <from>EventDialog (—Å—Å—ã–ª–∫–∞ "–û –ø–µ—Ä—Å–æ–Ω–∞–∂–µ")</from>
    </invocation>
    <display-mode>modal-overlay-or-fullscreen-mobile</display-mode>
  </meta>

  <!-- –ë–ê–ó–û–í–´–ô –õ–ï–ô–ê–£–¢ -->
  <layout>
    <backdrop
      color="rgba(15,23,42,0.65)"
      blur="10px"
      dismiss-on-tap="true"
      z-index="550"
    />

    <panel
      position="center"
      max-width="420px"
      width-mobile="100%"
      height-mobile="100vh"
      height-desktop="auto"
      border-radius-mobile="0"
      border-radius-desktop="24px"
      background="rgba(255,255,255,0.98)"
      padding="16px 16px 20px 16px"
      shadow="0 20px 60px rgba(15,23,42,0.45)"
      safe-area-top="env(safe-area-inset-top)"
      safe-area-bottom="env(safe-area-inset-bottom)"
    >
      <header
        display="flex"
        align="center"
        justify="space-between"
        margin-bottom="8px"
      >
        <title font-size="1rem" weight="600">–ü—Ä–æ—Ñ–∏–ª—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</title>
        <close-button size="32px" shape="circle">
          <icon>‚úï</icon>
        </close-button>
      </header>

      <content
        type="scrollable"
        max-height="calc(100vh - 80px)"
        padding-right="4px"
      />
    </panel>
  </layout>

  <!-- –í–ï–†–•–ù–ò–ô –ë–õ–û–ö: –ü–û–†–¢–†–ï–¢ + –ë–ê–ó–û–í–ê–Ø –ò–ù–§–ê -->
  <hero-section>
    <container
      display="flex"
      direction="column"
      align="center"
      gap="8px"
      margin-bottom="12px"
    >
      <avatar
        type="portrait"
        size="96px"
        shape="circle"
        border="3px solid rgba(248,113,170,0.7)"
        shadow="0 8px 24px rgba(15,23,42,0.25)"
        image-ref="characters/*/visual-specs.xml"
      />

      <name font-size="1.25rem" weight="700" />
      <role font-size="0.85rem" color="#6B7280" />

      <tags-row display="flex" gap="6px" wrap="true">
        <!-- –ü—Ä–∏–º–µ—Ä—ã: "–°–µ–º—å—è", "–ü–∞—Ä—Ç–Ω—ë—Ä", "–ü–∏—Ç–æ–º–µ—Ü", "–î—Ä—É–∑—å—è" -->
      </tags-row>
    </container>
  </hero-section>

  <!-- –°–ï–ö–¶–ò–Ø: –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –û–¢–ù–û–®–ï–ù–ò–ô -->
  <relationship-section>
    <title font-size="0.9rem" weight="600" margin-bottom="4px">–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π</title>

    <score-card
      border-radius="14px"
      padding="10px 12px"
      background="rgba(248,250,252,0.95)"
      display="flex"
      direction="column"
      gap="6px"
      margin-bottom="8px"
    >
      <score-row display="flex" align="center" justify="space-between">
        <label font-size="0.8rem" color="#6B7280">–£—Ä–æ–≤–µ–Ω—å –±–ª–∏–∑–æ—Å—Ç–∏</label>
        <value font-size="0.9rem" weight="600">
          <!-- –ü—Ä–∏–º–µ—Ä: "72 / 100" -->
        </value>
      </score-row>

      <progress-bar
        height="8px"
        border-radius="999px"
        background="rgba(229,231,235,1)"
      >
        <fill
          gradient="linear-gradient(90deg, #F97316 0%, #EC4899 50%, #6366F1 100%)"
        />
      </progress-bar>

      <descriptor font-size="0.8rem" color="#4B5563">
        <!-- –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
             "–í—ã –æ—á–µ–Ω—å –±–ª–∏–∑–∫–∏, –º–Ω–æ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Ç–µ–ø–ª–∞."
        -->
      </descriptor>

      <subtle-meta font-size="0.7rem" color="#9CA3AF">
        <!-- –ü—Ä–∏–º–µ—Ä: "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –≤–∞–∂–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ: —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –≤–µ—á–µ—Ä –¥–æ–º–∞" -->
      </subtle-meta>
    </score-card>
  </relationship-section>

  <!-- –°–ï–ö–¶–ò–Ø: –•–ê–†–ê–ö–¢–ï–† –ò –ö–û–†–û–¢–ö–ê–Ø –ë–ò–û -->
  <bio-section>
    <title font-size="0.9rem" weight="600" margin-bottom="4px">–û –ø–µ—Ä—Å–æ–Ω–∞–∂–µ</title>

    <bio-block
      border-radius="12px"
      padding="8px 10px"
      background="rgba(255,255,255,0.95)"
      border="1px solid rgba(226,232,240,1)"
      margin-bottom="8px"
    >
      <short-bio font-size="0.8rem" color="#4B5563">
        <!-- 2‚Äì3 —Å—Ç—Ä–æ–∫–∏ –ø—Ä–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä, –ø—Ä–∏–≤—ã—á–∫–∏ –∏ —Ä–æ–ª—å –≤ –∂–∏–∑–Ω–∏ –¢–∞–Ω–∏ -->
      </short-bio>
    </bio-block>

    <traits-list
      display="flex"
      wrap="true"
      gap="6px"
    >
      <!-- –ü—Ä–∏–º–µ—Ä—ã —á–∏–ø–æ–≤:
           "–ó–∞–±–æ—Ç–ª–∏–≤—ã–π", "–£–ø—Ä—è–º—ã–π", "–¢—ë–ø–ª—ã–π —é–º–æ—Ä", "–õ—é–±–∏—Ç –ø–æ—Ä—è–¥–æ–∫"
      -->
      <trait-chip size="small" tone="muted" />
    </traits-list>
  </bio-section>

  <!-- –°–ï–ö–¶–ò–Ø: –î–ò–ù–ê–ú–ò–ö–ê –û–¢–ù–û–®–ï–ù–ò–ô -->
  <history-section>
    <title font-size="0.9rem" weight="600" margin="10px 0 4px 0">–ö–∞–∫ –º–µ–Ω—è–ª–∏—Å—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è</title>

    <history-card
      border-radius="12px"
      padding="8px 10px"
      background="rgba(248,250,252,0.95)"
    >
      <timeline
        type="compact-list"
        max-items="3"
      >
        <!-- –ö–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç: –¥–∞—Ç–∞ + –∫—Ä–∞—Ç–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ -->
        <event>
          <date font-size="0.7rem" color="#9CA3AF" />
          <description font-size="0.78rem" color="#4B5563" />
          <delta font-size="0.7rem" />
        </event>
      </timeline>

      <link-more font-size="0.75rem" color="#3B82F6">
        –°–º–æ—Ç—Ä–µ—Ç—å –±–æ–ª—å—à–µ —Å–æ–±—ã—Ç–∏–π
      </link-more>
    </history-card>
  </history-section>

  <!-- –°–ï–ö–¶–ò–Ø: –ß–¢–û –ü–û–ú–û–ì–ê–ï–¢ –£–õ–£–ß–®–ò–¢–¨ –û–¢–ù–û–®–ï–ù–ò–Ø -->
  <tips-section>
    <title font-size="0.9rem" weight="600" margin="10px 0 4px 0">–ö–∞–∫ —É–ª—É—á—à–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è</title>

    <tips-list
      type="chips"
      gap="6px"
    >
      <!-- –ü—Ä–∏–º–µ—Ä—ã:
           "–ß–∞—â–µ —Å–æ–∑–≤–∞–Ω–∏–≤–∞—Ç—å—Å—è", "–ü—Ä–æ–≤–æ–¥–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –≤–µ—á–µ—Ä–∞",
           "–ì—É–ª—è—Ç—å –≤–º–µ—Å—Ç–µ", "–£–¥–µ–ª—è—Ç—å –≤—Ä–µ–º—è –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞"
      -->
      <tip-chip
        size="small"
        tone="positive"
        icon="lightbulb"
      />
    </tips-list>

    <recommended-actions
      margin-top="6px"
      border-radius="12px"
      padding="8px 10px"
      background="rgba(255,255,255,0.95)"
      border="1px dashed rgba(209,213,219,1)"
    >
      <label font-size="0.8rem" weight="600" color="#4B5563">
        –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
      </label>
      <actions
        display="flex"
        direction="column"
        gap="4px"
        margin-top="4px"
      >
        <!-- –°—Ç—Ä–æ–∫–∏ –≤–∏–¥–∞: "üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å –≤–µ—á–µ—Ä–æ–º (–°—á–∞—Å—Ç—å–µ +10, –û—Ç–Ω–æ—à–µ–Ω–∏—è +8)" -->
        <action-row font-size="0.78rem" color="#4B5563" />
      </actions>
    </recommended-actions>
  </tips-section>

  <!-- –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ü–û–õ–Ø –î–õ–Ø –ö–õ–Æ–ß–ï–í–´–• –ü–ï–†–°–û–ù–ê–ñ–ï–ô -->
  <special-cases>
    <character id="husband">
      <extra-section title="–ü—Ä–æ –≤–∞—à–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è">
        <text>
          –ö—Ä–∞—Ç–∫–æ–µ –ø–æ—è—Å–Ω–µ–Ω–∏–µ, –ø–æ—á–µ–º—É –º—É–∂ ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂ –∏—Å—Ç–æ—Ä–∏–∏,
          –∫–∞–∫ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –Ω–∏–º –≤–ª–∏—è—é—Ç –Ω–∞ –∫–æ–Ω—Ü–æ–≤–∫–∏.
        </text>
      </extra-section>
      <marker type="critical-relationship" />
    </character>

    <character id="father">
      <extra-section title="–ü—Ä–æ —Å–µ–º—å—é">
        <text>
          –û—Ç–Ω–æ—à–µ–Ω–∏—è —Å –æ—Ç—Ü–æ–º –æ—Ç—Ä–∞–∂–∞—é—Ç —Å–µ–º–µ–π–Ω—É—é –ª–∏–Ω–∏—é –∏—Å—Ç–æ—Ä–∏–∏, –≤–∞–∂–Ω—ã –¥–ª—è
          —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.
        </text>
      </extra-section>
    </character>

    <character id="sam">
      <extra-section title="–ü—Ä–æ –°—ç–º–∞">
        <text>
          –°—ç–º ‚Äî —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–º–ø–∞–Ω—å–æ–Ω. –í—ã—Å–æ–∫–∞—è —Å–≤—è–∑—å —Å –Ω–∏–º –¥–∞—ë—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ
          —Å—Ü–µ–Ω—ã –∏ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—â—É—â–µ–Ω–∏–µ —É—é—Ç–∞.
        </text>
      </extra-section>
    </character>

    <character id="garfield">
      <extra-section title="–ü—Ä–æ –ì–∞—Ä—Ñ–∏–ª–¥–∞">
        <text>
          –ì–∞—Ä—Ñ–∏–ª–¥ ‚Äî –ª–µ–Ω–∏–≤—ã–π, –Ω–æ –ø—Ä–µ–¥–∞–Ω–Ω—ã–π –∫–æ—Ç. –õ—é–±–∏—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ –≤–∫—É—Å–Ω—É—é –µ–¥—É.
        </text>
      </extra-section>
    </character>
  </special-cases>

  <!-- DATA BINDING -->
  <data-binding>
    <input>
      <field>characterId</field>
    </input>

    <source name="relationshipsState">
      <field>characterId</field>
      <field>score</field>
      <field>lastEvents[]</field>
      <field>recommendedActions[]</field>
    </source>

    <source name="characterMeta">
      <field>name</field>
      <field>role</field>
      <field>type</field>
      <field>tags[]</field>
      <field>bio</field>
      <field>traits[]</field>
    </source>

    <mapping>
      <characterMeta.name ‚Üí hero-section.name />
      <characterMeta.role ‚Üí hero-section.role />
      <characterMeta.tags ‚Üí hero-section.tags-row />
      <characterMeta.bio ‚Üí bio-section.short-bio />
      <characterMeta.traits ‚Üí bio-section.traits-list />
      <relationshipsState.score ‚Üí relationship-section.score-card.progress-bar & value />
      <relationshipsState.lastEvents ‚Üí history-section.timeline.events />
      <relationshipsState.recommendedActions ‚Üí tips-section.recommended-actions.actions />
    </mapping>
  </data-binding>

  <!-- –ê–ù–ò–ú–ê–¶–ò–ò -->
  <animations>
    <on-open>
      <backdrop opacity-from="0" opacity-to="1" duration="180ms" easing="ease-out" />
      <panel
        translateY-from="20px"
        translateY-to="0"
        opacity-from="0"
        opacity-to="1"
        duration="220ms"
        easing="cubic-bezier(0.25, 0.8, 0.25, 1)"
      />
      <haptic>Telegram.WebApp.HapticFeedback.impactOccurred('light')</haptic>
    </on-open>

    <on-close>
      <panel
        translateY-from="0"
        translateY-to="20px"
        opacity-from="1"
        opacity-to="0"
        duration="180ms"
        easing="ease-in"
      />
    </on-close>
  </animations>

  <!-- –ò–ù–¢–ï–†–ê–ö–¶–ò–ò -->
  <interactions>
    <on-close-button-tap>
      <behavior>–ó–∞–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</behavior>
      <haptic>light</haptic>
    </on-close-button-tap>

    <on-backdrop-tap>
      <behavior>–ó–∞–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</behavior>
    </on-backdrop-tap>

    <on-recommended-action-tap>
      <behavior>–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ ActionsPage —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–∂—É</behavior>
      <haptic>selectionChanged</haptic>
    </on-recommended-action-tap>
  </interactions>

  <!-- –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –†–ï–ê–õ–ò–ó–ê–¶–ò–ò -->
  <implementation-requirements>
    <requirement priority="critical">CharacterProfile –Ω–µ –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—ã –Ω–∞–ø—Ä—è–º—É—é, —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è.</requirement>
    <requirement priority="critical">–ü—Ä–æ—Ñ–∏–ª—å –¥–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –±–µ–∑ –∑–∞–º–µ—Ç–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏.</requirement>
    <requirement priority="high">–ù–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—å –∑–∞–Ω–∏–º–∞–µ—Ç –≤–µ—Å—å —ç–∫—Ä–∞–Ω; –Ω–∞ desktop ‚Äî —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–∞–ª–∫–∞.</requirement>
    <requirement priority="high">–ü–æ—Ä—Ç—Ä–µ—Ç—ã –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∞—Å—Å–µ—Ç–æ–≤/–ø—Ä–æ–º—Ç–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π.</requirement>
    <requirement priority="medium">–¢–µ–∫—Å—Ç –∏ –±–ª–æ–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ –¥–ª–∏–Ω—É –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –∏—Å—Ç–æ—Ä–∏–∏, –±–µ–∑ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞.</requirement>
  </implementation-requirements>

</character-profile-specification>
