<?xml version="1.0" encoding="UTF-8"?>
<!--
  TATYANA CHARACTER ANIMATIONS
  –î–µ—Ç–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π –≥–ª–∞–≤–Ω–æ–π –≥–µ—Ä–æ–∏–Ω–∏
  
  –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª: ../ANIMATION_SYSTEM.xml
  –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: ../../screens/room/RoomPage.xml
-->

<character name="tatyana" type="protagonist">

  <meta>
    <full-name>–¢–∞—Ç—å—è–Ω–∞</full-name>
    <description>–ì–ª–∞–≤–Ω–∞—è –≥–µ—Ä–æ–∏–Ω—è –∏–≥—Ä—ã, –ø—Ä–æ—Ç–æ—Ç–∏–ø - –∂–µ–Ω–∞ –¥–µ–≤–µ–ª–æ–ø–µ—Ä–∞</description>
    <reference-photos>
      <photo>User uploaded reference images</photo>
    </reference-photos>
  </meta>

  <!-- –í–ò–ó–£–ê–õ–¨–ù–´–ô –î–ò–ó–ê–ô–ù -->
  <visual-design style="pixel-art-isometric">
    <sprite-size width="64" height="64" />
    <perspective>Isometric 2:1 (45¬∞)</perspective>
    
    <appearance>
      <hair color="#8B1538" description="–ö—Ä–∞—Å–Ω–æ-–≤–∏–Ω–Ω—ã–µ –≤–æ–ª–æ—Å—ã (red-wine)" priority="critical" />
      <hair-style>–î–ª–∏–Ω–Ω—ã–µ –≤–æ–ª–æ—Å—ã, –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–∏—á—ë—Å–∫–∞</hair-style>
      <body-type>–°—Ç—Ä–æ–π–Ω–∞—è, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è</body-type>
      <clothing>–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–∞—è –æ–¥–µ–∂–¥–∞ (–¥–∂–∏–Ω—Å—ã, —Å–≤–∏—Ç–µ—Ä / –ø–ª–∞—Ç—å–µ)</clothing>
      <palette>
        <primary>#8B1538</primary> <!-- –í–æ–ª–æ—Å—ã -->
        <skin>#FFD1BA</skin>
        <clothes>#6B7280, #F3F4F6, #3B82F6</clothes>
      </palette>
    </appearance>

    <emotion-expressions>
      <expression name="neutral" default="true" />
      <expression name="happy" emoji="üòä" />
      <expression name="sad" emoji="üòî" />
      <expression name="tired" emoji="üò™" />
      <expression name="love" emoji="ü•∞" />
      <expression name="focused" emoji="üßê" />
    </emotion-expressions>
  </visual-design>

  <!-- –ê–ù–ò–ú–ê–¶–ò–ò (–í–°–ï HORIZONTAL STRIP ATLASES) -->
  <animations atlas-format="horizontal-strip">
    
    <!-- IDLE (–ü–û–ö–û–ô) -->
    <animation name="idle" type="loop" priority="low">
      <description>–°—Ç–æ–∏—Ç –Ω–∞ –º–µ—Å—Ç–µ, –ª—ë–≥–∫–æ–µ –ø–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ, –¥—ã—Ö–∞–Ω–∏–µ</description>
      
      <variants>
        <variant name="idle-neutral" default="true">
          <atlas path="/sprites/characters/tatyana/idle-neutral.webp" />
          <frames count="24" />
          <frame-size width="64" height="64" />
          <fps>6</fps>
          <loop>true</loop>
          <expression>neutral</expression>
        </variant>

        <variant name="idle-happy">
          <atlas path="/sprites/characters/tatyana/idle-happy.webp" />
          <frames count="24" />
          <fps>6</fps>
          <loop>true</loop>
          <expression>happy</expression>
          <trigger condition="happiness > 70" />
        </variant>

        <variant name="idle-tired">
          <atlas path="/sprites/characters/tatyana/idle-tired.webp" />
          <frames count="20" />
          <fps>4</fps>
          <loop>true</loop>
          <expression>tired</expression>
          <trigger condition="energy < 30" />
        </variant>
      </variants>
    </animation>

    <!-- WALK (–•–û–î–¨–ë–ê) -->
    <animation name="walk" type="loop" priority="normal">
      <description>–•–æ–¥—å–±–∞ –≤ 4 –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö (–∏–∑–æ–º–µ—Ç—Ä–∏—è)</description>
      
      <directions>
        <direction name="north" angle="0¬∞">
          <atlas path="/sprites/characters/tatyana/walk-north.webp" />
          <frames count="25" />
          <frame-size width="64" height="64" />
          <fps>10</fps>
          <loop>true</loop>
        </direction>

        <direction name="east" angle="90¬∞">
          <atlas path="/sprites/characters/tatyana/walk-east.webp" />
          <frames count="25" />
          <fps>10</fps>
          <loop>true</loop>
        </direction>

        <direction name="south" angle="180¬∞">
          <atlas path="/sprites/characters/tatyana/walk-south.webp" />
          <frames count="25" />
          <fps>10</fps>
          <loop>true</loop>
        </direction>

        <direction name="west" angle="270¬∞">
          <atlas path="/sprites/characters/tatyana/walk-west.webp" />
          <frames count="25" />
          <fps>10</fps>
          <loop>true</loop>
        </direction>
      </directions>
    </animation>

    <!-- WORK (–†–ê–ë–û–¢–ê –ó–ê –ö–û–ú–ü–¨–Æ–¢–ï–†–û–ú) -->
    <animation name="work" type="loop" priority="normal">
      <description>–°–∏–¥–∏—Ç –∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º, –ø–µ—á–∞—Ç–∞–µ—Ç</description>
      
      <atlas path="/sprites/characters/tatyana/work-computer.webp" />
      <frames count="25" />
      <frame-size width="64" height="64" />
      <fps>6</fps>
      <loop>true</loop>
      <expression>focused</expression>
      
      <keyframes>
        <keyframe at="0" action="hands-on-keyboard" />
        <keyframe at="5" action="typing" />
        <keyframe at="10" action="pause-look-screen" />
        <keyframe at="15" action="typing" />
        <keyframe at="20" action="lean-back-think" />
      </keyframes>
    </animation>

    <!-- SLEEP (–°–û–ù) -->
    <animation name="sleep" type="loop" priority="normal">
      <description>–°–ø–∏—Ç –≤ –∫—Ä–æ–≤–∞—Ç–∏, —Å–ø–æ–∫–æ–π–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ</description>
      
      <atlas path="/sprites/characters/tatyana/sleep.webp" />
      <frames count="20" />
      <frame-size width="128" height="64" /> <!-- –®–∏—Ä–µ, —Ç.–∫. –ª–µ–∂–∏—Ç -->
      <fps>4</fps>
      <loop>true</loop>
      <expression>neutral</expression>
      
      <position>Lying in bed</position>
      <breathing subtle="true" />
    </animation>

    <!-- INTERACTION (–í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–ò–ï –° –û–ë–™–ï–ö–¢–ê–ú–ò) -->
    <animation name="interaction" type="one-shot" priority="high">
      <description>–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –æ–±—ä–µ–∫—Ç–æ–º (—Ç—è–Ω–µ—Ç—Å—è, –±–µ—Ä—ë—Ç)</description>
      
      <variants>
        <variant name="pick-up">
          <atlas path="/sprites/characters/tatyana/interaction-pickup.webp" />
          <frames count="25" />
          <fps>8</fps>
          <loop>false</loop>
        </variant>

        <variant name="use-object">
          <atlas path="/sprites/characters/tatyana/interaction-use.webp" />
          <frames count="25" />
          <fps>8</fps>
          <loop>false</loop>
        </variant>
      </variants>
    </animation>

    <!-- EMOTIONS (–≠–ú–û–¶–ò–û–ù–ê–õ–¨–ù–´–ï –†–ï–ê–ö–¶–ò–ò) -->
    <animation name="emotion" type="one-shot" priority="high">
      <description>–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è</description>
      
      <variants>
        <variant name="joy">
          <atlas path="/sprites/characters/tatyana/emotion-joy.webp" />
          <frames count="25" />
          <fps>10</fps>
          <loop>false</loop>
          <expression>happy</expression>
          <trigger event="achievement, relationship-up, money-reward" />
        </variant>

        <variant name="love">
          <atlas path="/sprites/characters/tatyana/emotion-love.webp" />
          <frames count="25" />
          <fps>8</fps>
          <loop>false</loop>
          <expression>love</expression>
          <particle-effect type="hearts" />
          <trigger event="call-husband, date, gift" />
        </variant>

        <variant name="sadness">
          <atlas path="/sprites/characters/tatyana/emotion-sad.webp" />
          <frames count="20" />
          <fps>6</fps>
          <loop>false</loop>
          <expression>sad</expression>
          <trigger event="relationship-down, failed-action" />
        </variant>

        <variant name="surprise">
          <atlas path="/sprites/characters/tatyana/emotion-surprise.webp" />
          <frames count="20" />
          <fps>10</fps>
          <loop>false</loop>
          <trigger event="unexpected-event, notification" />
        </variant>
      </variants>
    </animation>

    <!-- GROOMING (–£–•–û–î –ó–ê –°–û–ë–û–ô) -->
    <animation name="grooming" type="one-shot" priority="normal">
      <description>–ü—Ä–∏–≤–æ–¥–∏—Ç —Å–µ–±—è –≤ –ø–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–¥ –∑–µ—Ä–∫–∞–ª–æ–º</description>
      
      <atlas path="/sprites/characters/tatyana/grooming-mirror.webp" />
      <frames count="25" />
      <fps>8</fps>
      <loop>false</loop>
      
      <keyframes>
        <keyframe at="0" action="approach-mirror" />
        <keyframe at="5" action="look-at-reflection" />
        <keyframe at="10" action="fix-hair" />
        <keyframe at="15" action="check-appearance" />
        <keyframe at="20" action="satisfied-smile" />
      </keyframes>
    </animation>

  </animations>

  <!-- –°–û–°–¢–û–Ø–ù–ò–Ø –ò –ü–ï–†–ï–•–û–î–´ -->
  <state-machine>
    <states>
      <state name="idle" default="true" priority="1" />
      <state name="walking" priority="2" />
      <state name="working" priority="3" />
      <state name="sleeping" priority="3" />
      <state name="interacting" priority="4" />
      <state name="emotion" priority="5" />
    </states>

    <transitions>
      <transition from="idle" to="walking" instant="true" />
      <transition from="walking" to="idle" instant="true" />
      <transition from="idle" to="working" blend="200ms" />
      <transition from="any" to="emotion" interrupt="true" priority="high" />
      <transition from="emotion" to="previous-state" delay="500ms" />
    </transitions>
  </state-machine>

  <!-- –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –°–ü–†–ê–ô–¢–ê–ú -->
  <sprite-requirements>
    <requirement priority="critical">–í–û–õ–û–°–´ –¢–û–õ–¨–ö–û –ö–†–ê–°–ù–û-–í–ò–ù–ù–´–ï #8B1538</requirement>
    <requirement priority="critical">–í—Å–µ –∫–∞–¥—Ä—ã –∞–Ω–∏–º–∞—Ü–∏–∏ 64x64px (–∫—Ä–æ–º–µ sleep: 128x64px)</requirement>
    <requirement priority="critical">–ò–∑–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π —É–≥–æ–ª 2:1 (45¬∞)</requirement>
    <requirement priority="high">–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏</requirement>
    <requirement priority="high">–ß—ë—Ç–∫–∏–µ –ø–∏–∫—Å–µ–ª—å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã (–±–µ–∑ anti-aliasing)</requirement>
    <requirement priority="high">–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –≤–æ –≤—Å–µ—Ö –∞–Ω–∏–º–∞—Ü–∏—è—Ö</requirement>
    <requirement priority="medium">–¢–µ–Ω—å –ø–æ–¥ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–ª–æ–µ–º</requirement>
    <requirement priority="medium">–í—Å–µ –∞—Ç–ª–∞—Å—ã < 500KB –ø–æ—Å–ª–µ WebP —Å–∂–∞—Ç–∏—è</requirement>
  </sprite-requirements>

  <!-- –°–°–´–õ–ö–ò –ù–ê ASSETS -->
  <assets-structure>
    <base-path>/sprites/characters/tatyana/</base-path>
    
    <files>
      <file>idle-neutral.webp</file>
      <file>idle-happy.webp</file>
      <file>idle-tired.webp</file>
      <file>walk-north.webp</file>
      <file>walk-east.webp</file>
      <file>walk-south.webp</file>
      <file>walk-west.webp</file>
      <file>work-computer.webp</file>
      <file>sleep.webp</file>
      <file>interaction-pickup.webp</file>
      <file>interaction-use.webp</file>
      <file>emotion-joy.webp</file>
      <file>emotion-love.webp</file>
      <file>emotion-sad.webp</file>
      <file>emotion-surprise.webp</file>
      <file>grooming-mirror.webp</file>
    </files>
  </assets-structure>

</character>
